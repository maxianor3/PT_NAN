;/*FB_PKG_DELIM*/

__d("WADevToolsBridge",["WADynamicRouterAsync"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("WADynamicRouterAsync")).DynamicRouter;function s(){return e}l.getDevToolBridge=s}),98);
__d("WAWebNewsletterVideoPlayLoggingContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({finishCount:1,setFinishCount:function(){}});l.default=u}),98);
__d("WAWebDomPlayVideo",["Promise"],(function(t,n,r,o,a,i){var e;function l(t){if(t.__playPromise)return t.__playPromise;var r=new(e||(e=n("Promise")))(function(e,n){function r(n){t.removeEventListener("playing",r),t.removeEventListener("error",o),(!t.videoHeight||!t.videoWidth)&&r(n),delete t.__playPromise,e()}function o(e){t.removeEventListener("playing",r),t.removeEventListener("error",o),delete t.__playPromise,n(e)}t.addEventListener("playing",r),t.addEventListener("error",o);var a=t.play();s(a)&&(t.removeEventListener("playing",r),t.removeEventListener("error",o),a.then(function(){delete t.__playPromise,e()}).catch(function(e){delete t.__playPromise,n(e)}))});return t.__playPromise=r,r}function s(e){return e&&typeof e.then=="function"}i.default=l}),66);
__d("WAWebWamEnumPlaybackOriginType",[],(function(t,n,r,o,a,i){var e=Object.freeze({CONVERSATION:1,STATUS:2,CHANNELS:3});i.PLAYBACK_ORIGIN_TYPE=e}),66);
__d("WAWebWamEnumPlaybackStateType",[],(function(t,n,r,o,a,i){var e=Object.freeze({IDLE:1,READY_PLAY:2,READY_PAUSE:3,BUFFERING:4,OUTSIDE:5,ENDED:6,ERROR:7});i.PLAYBACK_STATE_TYPE=e}),66);
__d("WAWebMediaStreamPlaybackWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumPlaybackOriginType","WAWebWamEnumPlaybackStateType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({MediaStreamPlayback:[1584,{bytesDownloadedStart:[4,e.TYPES.NUMBER],bytesTransferred:[5,e.TYPES.NUMBER],didPlay:[15,e.TYPES.BOOLEAN],forcedPlayCount:[12,e.TYPES.INTEGER],initialBufferingT:[7,e.TYPES.TIMER],mediaSize:[2,e.TYPES.NUMBER],mediaType:[3,o("WAWebWamEnumMediaType").MEDIA_TYPE],overallPlayT:[10,e.TYPES.TIMER],overallT:[1,e.TYPES.TIMER],playbackCount:[14,e.TYPES.INTEGER],playbackError:[17,e.TYPES.INTEGER],playbackOrigin:[16,o("WAWebWamEnumPlaybackOriginType").PLAYBACK_ORIGIN_TYPE],playbackState:[11,o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE],seekCount:[13,e.TYPES.INTEGER],statusId:[18,e.TYPES.STRING],totalRebufferingCount:[9,e.TYPES.INTEGER],totalRebufferingT:[8,e.TYPES.TIMER],videoDuration:[6,e.TYPES.INTEGER]},[1,1,1],"regular"]},{MediaStreamPlayback:[]});l.MediaStreamPlaybackWamEvent=s}),98);
__d("useWAWebMediaStreamPlaybackMetric",["WAWebMediaStreamPlaybackWamEvent","WAWebPipVideoStreaming","WAWebWamEnumMediaType","WAWebWamEnumPlaybackOriginType","WAWebWamEnumPlaybackStateType","react","useLazyRef","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.experimental_useEffectEvent,c=s.useEffect,d=s.useRef;function m(e){return new(o("WAWebMediaStreamPlaybackWamEvent")).MediaStreamPlaybackWamEvent({playbackOrigin:e,mediaType:o("WAWebWamEnumMediaType").MEDIA_TYPE.VIDEO,didPlay:!1,playbackState:o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.IDLE})}function p(e,t,n,a){a===void 0&&(a=o("WAWebWamEnumPlaybackOriginType").PLAYBACK_ORIGIN_TYPE.CONVERSATION);var i=d(!0),l=r("useLazyRef")(function(){return m(a)}),s=u(function(e){var t=function(){e.commit(),i.current=!0,l.current=m(a),window.removeEventListener("unload",t)};return t});c(function(){if(!(e==null||!e.startsWith(o("WAWebPipVideoStreaming").VIDEO_STREAM_URL))){var t=l.current,n=s(t);return window.addEventListener("unload",n),n}},[e,l]);var p=r("useWAWebStableCallback")(function(e){t.current&&(l.current.videoDuration=Math.floor(t.current.duration)),n.onDurationChange==null||n.onDurationChange(e)}),_=r("useWAWebStableCallback")(function(e){l.current.playbackState=o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PLAY,l.current.didPlay||(l.current.didPlay=!0),n.onPlaying==null||n.onPlaying()}),f=r("useWAWebStableCallback")(function(e){l.current.playbackState===o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PLAY&&(l.current.playbackState=o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PAUSE),n.onPause==null||n.onPause(e)}),g=r("useWAWebStableCallback")(function(e){l.current.playbackState=o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.BUFFERING,i.current?l.current.startInitialBufferingT():l.current.startTotalRebufferingT(),n.onWaiting==null||n.onWaiting(e)}),h=r("useWAWebStableCallback")(function(e){l.current.playbackState=o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PAUSE,i.current?(l.current.markInitialBufferingT(),i.current=!1):l.current.markTotalRebufferingT(),n.onCanPlay==null||n.onCanPlay(e)}),y=r("useWAWebStableCallback")(function(e){l.current.playbackState=o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.ENDED,n.onEnded==null||n.onEnded(e)}),C=r("useWAWebStableCallback")(function(e){var r,a,i;l.current.playbackState=o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.ERROR;var s=(r=(a=(i=t.current)==null||(i=i.error)==null?void 0:i.code)!=null?a:e.code)!=null?r:null;s!=null&&(l.current.playbackError=s),n.onError==null||n.onError(e)});return{mediaStreamPlaybackMetricRef:l,wrappedProps:{onDurationChange:p,onPlaying:_,onWaiting:g,onCanPlay:h,onEnded:y,onError:C,onPause:f}}}l.useMediaStreamPlaybackMetric=p}),98);
__d("useWAWebBaseVideoCommon",["Promise","WAAbortError","WALogger","WAWebDomPlayVideo","WAWebPttAudioChannels","WAWebUA","asyncToGeneratorRuntime","err","react","useWAWebMediaStreamPlaybackMetric","useWAWebOnUnmount","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e,s,u,c,d=["onPlaying"],m,p,_=p||(p=o("react")),f=_.useEffect,g=_.useRef;function h(t,a,i,l,p){var _,h=g(0),y=g(null),C=g(null),b=o("useWAWebMediaStreamPlaybackMetric").useMediaStreamPlaybackMetric(i,y,l),v=b.wrappedProps,S=v.onPlaying,R=babelHelpers.objectWithoutPropertiesLoose(v,d),L=(_=r("useWAWebStableCallback"))(function(e){var t=y.current;t&&(t.paused||t.videoHeight>0&&t.videoWidth>0&&(S==null||S(),p==null||p.onPlayingExtra==null||p.onPlayingExtra(y)))}),E=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=y.current;if(!t)return(m||(m=n("Promise"))).reject(r("err")("cannot play unmounted video"));if(!t.paused)return(m||(m=n("Promise"))).resolve();t.removeEventListener("playing",L);try{yield r("WAWebDomPlayVideo")(t),t.addEventListener("playing",L),L()}catch(n){var a,i,l,u;if(t.addEventListener("playing",L),n.name===o("WAAbortError").ABORT_ERROR){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["video.play() promise rejected w/ AbortError: ",", error code: ",""])),n.message,n.code);return}var c=(a=(i=y.current)==null||(i=i.error)==null?void 0:i.message)!=null?a:"",d=(l=(u=y.current)==null||(u=u.error)==null?void 0:u.code)!=null?l:"";o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["video.play() promise rejected: "," The error code is ","."])),c,d),R.onError==null||R.onError(n)}});return function(){return t.apply(this,arguments)}})(),k=_(function(){E()}),I=_(function(){var e=y.current;if((e==null?void 0:e.paused)!==!0){var t;e==null||e.pause(),p==null||p.onPauseExtra==null||p.onPauseExtra((t=e==null?void 0:e.currentTime)!=null?t:0)}}),T=_(function(){var e,t;return(e=(t=y.current)==null?void 0:t.volume)!=null?e:0}),D=_(function(e){y.current&&(y.current.volume=e)}),x=_(function(){var e,t;return(e=(t=y.current)==null?void 0:t.muted)!=null?e:!1}),$=_(function(e){y.current&&(y.current.muted=e)}),P=_(function(){var e,t;return(e=(t=y.current)==null?void 0:t.paused)!=null?e:!0}),N=_(function(){var e,t;return(e=(t=y.current)==null?void 0:t.currentTime)!=null?e:0}),M=_(function(e){y.current&&(y.current.currentTime=e)}),w=_(function(){var e,t;return(e=(t=y.current)==null?void 0:t.duration)!=null?e:0}),A=_(function(e){y.current&&(y.current.duration=e)}),F=_(function(){var e=y.current;e&&(e.currentTime=0,I())}),O=_(function(){var e,t;return(e=(t=y.current)==null?void 0:t.buffered)!=null?e:null}),B=_(function(){return y.current}),W=function(t){var e=y.current;if(e&&(e.removeEventListener("playing",W),!e.videoHeight||!e.videoWidth)){I(),k();var n=6;h.current<n&&h.current++;var r;h.current>1&&h.current<n&&(r="the height and width of the video is not zero, count (larger than 1): "+h.current),h.current>=n&&(r="the height and width of the video is not zero, count larger than "+h.current),r!=null&&o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed! ",""])),r).sendLogs("base-video-non-zero-height-and-width")}},q=_(function(e,n){if(t===!0){e.removeEventListener("playing",W),e.addEventListener("playing",W);var r=e.srcObject;(r!=null||n&&e.paused)&&k()}}),U=_(function(e){var n;e!==y.current&&((n=y.current)==null||n.removeEventListener("playing",L),C.current==null||C.current(),y.current=e,e!=null&&(C.current=o("WAWebPttAudioChannels").MainAudioChannel.registerMedia(e),"srcObject"in e&&a?e.srcObject=a:e.src||o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["srcObject is not supported in video tag while src is not set."]))),e.addEventListener("playing",L),t===!0&&q(e,o("WAWebUA").UA.isGecko||o("WAWebUA").UA.isSafari)))});return f(function(){var e=y.current;e!=null&&t===!0&&q(e,!0)},[t]),r("useWAWebOnUnmount")(function(){C.current==null||C.current()}),{videoRef:y,autoPlayErrorCountRef:h,unregisterFromAudioChannelRef:C,wrappedProps:R,handlePlaying:L,play:k,pause:I,getVolume:T,setVolume:D,getMuted:x,setMuted:$,getPaused:P,getCurrentTime:N,setCurrentTime:M,getDuration:w,setDuration:A,pauseAndReset:F,getBuffered:O,underlyingVideo:B,setRefVideo:U}}l.default=h}),98);
__d("WAWebWamEnumVideoPlayOrigin",[],(function(t,n,r,o,a,i){var e=Object.freeze({CONVERSATION:1,GALLERY_PICKER:2,STARRED_MESSAGES:3,MEDIA_VIEW_PAGER:4,OTHER_ORIGIN:5,CHANNELS:6,STATUS:7});i.VIDEO_PLAY_ORIGIN=e}),66);
__d("WAWebWamEnumVideoPlayResult",[],(function(t,n,r,o,a,i){var e=Object.freeze({OK:1,ERROR_PLAYER:2,ERROR_VIDEO_TRACK:3,ERROR_AUDIO_TRACK:4,ERROR_DOWNLOAD_FAILED:5});i.VIDEO_PLAY_RESULT=e}),66);
__d("WAWebWamEnumVideoPlayType",[],(function(t,n,r,o,a,i){var e=Object.freeze({FILE:1,STREAM:2,SENT:3});i.VIDEO_PLAY_TYPE=e}),66);
__d("WAWebChannelsVideoPlayWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumVideoPlayOrigin","WAWebWamEnumVideoPlayResult","WAWebWamEnumVideoPlayType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({ChannelsVideoPlay:[6556,{autoPlayT:[1,e.TYPES.INTEGER],cid:[2,e.TYPES.STRING],finishCount:[13,e.TYPES.INTEGER],height:[3,e.TYPES.INTEGER],postId:[4,e.TYPES.STRING],videoDuration:[5,e.TYPES.INTEGER],videoInitialBufferingT:[6,e.TYPES.TIMER],videoPlayOrigin:[7,o("WAWebWamEnumVideoPlayOrigin").VIDEO_PLAY_ORIGIN],videoPlayResult:[8,o("WAWebWamEnumVideoPlayResult").VIDEO_PLAY_RESULT],videoPlayT:[9,e.TYPES.INTEGER],videoPlayType:[10,o("WAWebWamEnumVideoPlayType").VIDEO_PLAY_TYPE],videoSize:[11,e.TYPES.NUMBER],watchingModule:[14,e.TYPES.STRING],width:[12,e.TYPES.INTEGER]},[1,1,1],"regular"]},{ChannelsVideoPlay:[]});l.ChannelsVideoPlayWamEvent=s}),98);
__d("useWAWebNewsletterVideoPlayMetric",["WAWebChannelsVideoPlayWamEvent","WAWebWamEnumVideoPlayOrigin","WAWebWamEnumVideoPlayResult","WAWebWamEnumVideoPlayType","react","useLazyRef","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.experimental_useEffectEvent,c=s.useEffect,d=s.useRef;function m(e,t){return new(o("WAWebChannelsVideoPlayWamEvent")).ChannelsVideoPlayWamEvent({cid:e,postId:t,videoPlayOrigin:o("WAWebWamEnumVideoPlayOrigin").VIDEO_PLAY_ORIGIN.CHANNELS,videoPlayType:o("WAWebWamEnumVideoPlayType").VIDEO_PLAY_TYPE.STREAM,videoPlayResult:o("WAWebWamEnumVideoPlayResult").VIDEO_PLAY_RESULT.OK})}function p(e,t){var n,a=d(!0),i=r("useLazyRef")(function(){return m(e,t)}),l=u(function(n){var r=function(){n.commit(),a.current=!0,i.current=m(e,t),window.removeEventListener("unload",r)};return r});c(function(){var e=i.current,t=l(e);return window.addEventListener("unload",t),t},[i]);var s=(n=r("useWAWebStableCallback"))(function(e){var t,n,r,a,l,s;i.current.videoPlayResult=o("WAWebWamEnumVideoPlayResult").VIDEO_PLAY_RESULT.OK;var u=(t=(n=e.current)==null?void 0:n.videoHeight)!=null?t:0,c=(r=(a=e.current)==null?void 0:a.videoWidth)!=null?r:0;i.current.height=u,i.current.width=c,i.current.videoDuration=Math.floor((l=(s=e.current)==null?void 0:s.duration)!=null?l:0)}),p=n(function(e){var t;i.current.videoPlayT=((t=i.current.videoPlayT)!=null?t:0)+Math.floor(e)}),_=n(function(){a.current&&i.current.startVideoInitialBufferingT()}),f=n(function(){a.current&&(i.current.markVideoInitialBufferingT(),a.current=!1)}),g=n(function(e,t){var n,r;i.current.finishCount=t;var o=((n=(r=e.current)==null?void 0:r.duration)!=null?n:0)*t;i.current.videoPlayT=Math.floor(o)}),h=n(function(e){var t,n,r=(t=(n=e.current)==null||(n=n.error)==null?void 0:n.code)!=null?t:null;r!=null&&(i.current.videoPlayResult=o("WAWebWamEnumVideoPlayResult").VIDEO_PLAY_RESULT.ERROR_PLAYER)});return{channelsVideoPlayRef:i,videoProps:{onChannelVideoPlaying:s,onChannelVideoPause:p,onChannelVideoWaiting:_,onChannelVideoCanPlay:f,onChannelVideoEnded:g,onChannelVideoError:h}}}l.useWAWebNewsletterVideoPlayMetric=p}),98);
__d("WAWebBaseNewsletterVideo.react",["WAWebFrontendMsgGetters","WAWebNewsletterVideoPlayLoggingContext","react","useWAWebBaseVideoCommon","useWAWebNewsletterVideoPlayMetric","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e=["autoPlay","children","className","msg","ref","srcObject"],s=["videoCallbacks"],u,c;function d(e){if(e==null)throw new TypeError("Cannot destructure "+e)}var m=c||(c=o("react")),p=u||(u=r("react")),_=m.useContext,f=m.useImperativeHandle;function g(t){var n,a=t.autoPlay,i=t.children,l=t.className,u=t.msg,c=t.ref,m=t.srcObject,g=babelHelpers.objectWithoutPropertiesLoose(t,e),h=g.videoCallbacks,y=babelHelpers.objectWithoutPropertiesLoose(g,s),C=_(r("WAWebNewsletterVideoPlayLoggingContext")),b=C.finishCount,v=C.setFinishCount,S=o("WAWebFrontendMsgGetters").getChat(u).id.toString().replace(/@.*/,""),R=(n=u.serverId)!=null?n:0,L=o("useWAWebNewsletterVideoPlayMetric").useWAWebNewsletterVideoPlayMetric(S,R.toString()),E=babelHelpers.extends({},(d(L.videoProps),L.videoProps)),k=r("useWAWebBaseVideoCommon")(a,m,g.src,y,{onPlayingExtra:function(t){E.onChannelVideoPlaying==null||E.onChannelVideoPlaying(t)},onPauseExtra:function(t){E.onChannelVideoPause==null||E.onChannelVideoPause(t)}}),I=k.videoRef,T=k.play,D=k.pause,x=k.getPaused,$=k.getCurrentTime,P=k.setCurrentTime,N=k.getDuration,M=k.setDuration,w=k.getVolume,A=k.setVolume,F=k.getMuted,O=k.setMuted,B=k.getBuffered,W=k.underlyingVideo,q=k.pauseAndReset,U=k.setRefVideo,V=k.wrappedProps,H=r("useWAWebStableCallback")(function(){E.onChannelVideoWaiting==null||E.onChannelVideoWaiting()}),G=r("useWAWebStableCallback")(function(){E.onChannelVideoCanPlay==null||E.onChannelVideoCanPlay()}),z=r("useWAWebStableCallback")(function(){E.onChannelVideoError==null||E.onChannelVideoError(I)}),j=r("useWAWebStableCallback")(function(){v(b+1),E.onChannelVideoEnded==null||E.onChannelVideoEnded(I,b)});return f(c,function(){return{play:T,pause:D,getPaused:x,getCurrentTime:$,setCurrentTime:P,getDuration:N,setDuration:M,getVolume:w,setVolume:A,getMuted:F,setMuted:O,getBuffered:B,underlyingVideo:W,pauseAndReset:q,onWaiting:H,canPlay:G,end:j,onError:z}},[T,D,x,$,P,N,M,w,A,F,O,B,W,q,H,G,j,z]),p.jsx("video",babelHelpers.extends({},h,{ref:U,autoPlay:g.src!=null?a:void 0,className:l!=null?l:"x1lliihq xh8yej3 x5yr21d"},y,V,{children:i}))}g.displayName=g.name+" [from "+i.id+"]",l.default=g}),98);
__d("WAWebBaseVideo.react",["WAWebNoop","react","useWAWebBaseVideoCommon"],(function(t,n,r,o,a,i,l){var e=["autoPlay","children","className","ref","srcObject"],s=["videoCallbacks"],u,c,d=c||(c=r("react")),m=(u||(u=o("react"))).useImperativeHandle;function p(t){var n,o=t.autoPlay,a=t.children,i=t.className,l=t.ref,u=t.srcObject,c=babelHelpers.objectWithoutPropertiesLoose(t,e),p=c.videoCallbacks,_=babelHelpers.objectWithoutPropertiesLoose(c,s),f=r("useWAWebBaseVideoCommon")(o,u,c.src,_,void 0),g=f.play,h=f.pause,y=f.getPaused,C=f.getCurrentTime,b=f.setCurrentTime,v=f.getDuration,S=f.setDuration,R=f.getVolume,L=f.setVolume,E=f.getMuted,k=f.setMuted,I=f.getBuffered,T=f.underlyingVideo,D=f.pauseAndReset,x=f.setRefVideo,$=f.wrappedProps,P=n=r("WAWebNoop"),N=n,M=n,w=n;return m(l,function(){return{play:g,pause:h,getPaused:y,getCurrentTime:C,setCurrentTime:b,getDuration:v,setDuration:S,getVolume:R,setVolume:L,getMuted:E,setMuted:k,getBuffered:I,underlyingVideo:T,pauseAndReset:D,end:P,canPlay:M,onError:w,onWaiting:N}},[g,h,y,C,b,v,S,R,L,E,k,I,T,D,P,M,w,N]),d.jsx("video",babelHelpers.extends({},p,{ref:x,autoPlay:c.src!=null?o:void 0,className:i!=null?i:"x1lliihq xh8yej3 x5yr21d"},_,$,{children:a}))}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("WAWebBaseVideoNewsletterContextProvider",["WAWebNewsletterVideoPlayLoggingContext","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useMemo,d=u.useState;function m(e){var t=e.children,n=d(1),o=n[0],a=n[1],i=c(function(){return{finishCount:o,setFinishCount:a}},[o,a]);return s.jsx(r("WAWebNewsletterVideoPlayLoggingContext").Provider,{value:i,children:t})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WAWebPipUrlVideoTag.react",["WAWebBaseNewsletterVideo.react","WAWebBaseVideo.react","WAWebBaseVideoNewsletterContextProvider","WAWebDebounce","WAWebMsgGetters","WAWebNewsletterGatingUtils","WAWebUserPrefsGeneral","react","useMergeRefs","useWAWebOnUnmount","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e=["ref"],s,u,c=u||(u=o("react")),d=s||(s=r("react")),m=c.useEffect,p=c.useRef,_=c.useState,f=r("WAWebDebounce")(function(e,t){o("WAWebUserPrefsGeneral").setMediaVolumeSettings(e,t)},500);function g(t){var n,a=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),l=i.onVolumeChange,s=i.onPlaying,u=i.startTime,c=i.onLoadedMetadata,g=i.onProgress,h=i.onTimeUpdate,y=i.onError,C=p(null),b=r("useMergeRefs")(a,C),v=_(!1),S=v[0],R=v[1];r("useWAWebOnUnmount")(function(){f.flush()});var L=(n=r("useWAWebStableCallback"))(function(e){var t,n=C.current;if((t=i.callbacks)==null||t.onVolumeChange==null||t.onVolumeChange(e),n){var r=n.getVolume(),o=n.getMuted();f(r,o),l({volume:r,muted:o})}}),E=n(function(e){if(!S&&e){var t;(t=i.callbacks)==null||t.onPlaying==null||t.onPlaying(e),R(!0)}s()}),k=n(function(){C.current&&typeof u=="number"&&C.current.setCurrentTime(u)}),I=n(function(e){if(u!=null){var t;k(),(t=i.callbacks)==null||t.onLoadedMetadata(e)}var n={duration:e.currentTarget.duration,volume:e.currentTarget.volume,muted:e.currentTarget.muted,videoWidth:e.currentTarget.videoWidth,videoHeight:e.currentTarget.videoHeight};c(n,e)}),T=function(t){if(C.current){var e=C.current.getBuffered(),n=[];if(e)for(var r=0;r<e.length;r++)n.push([e.start(r),e.end(r)]);g(n)}},D=function(t){var e=t.currentTarget.currentTime;h(e)},x=function(t){var e,n,r=(e=(n=C.current)==null||(n=n.underlyingVideo())==null?void 0:n.error)!=null?e:null;if(r==null&&t.code!=null){var o;y(t.code),i.onError(),(o=i.callbacks)==null||o.onError(t);return}y(r==null?void 0:r.code,r==null?void 0:r.message)},$=function(t){var e;(e=C.current)==null||e.end(),i.onEnded()},P=function(t){var e;(e=C.current)==null||e.canPlay(),i.onCanPlay==null||i.onCanPlay(t)},N=function(t){var e;(e=C.current)==null||e.onWaiting(),i.onWaiting==null||i.onWaiting(t)};m(function(){k()},[u,k]),m(function(){var e=C.current;if(e){var t=o("WAWebUserPrefsGeneral").getMediaVolumeSettings(),n=t.volume,r=t.muted;n!=null&&e.setVolume(n),e.setMuted(r)}},[]);var M=i.msg;return M!=null&&o("WAWebMsgGetters").getIsNewsletterMsg(M)&&o("WAWebNewsletterGatingUtils").isNewsletterVideoPlayLoggingEnabled()?d.jsx(r("WAWebBaseVideoNewsletterContextProvider"),{children:d.jsx(r("WAWebBaseNewsletterVideo.react"),{msg:M,ref:b,src:i.url,poster:i.poster,className:i.className,onVolumeChange:L,onEnded:$,onError:x,onPause:i.onPause,onPlaying:E,onProgress:T,onTimeUpdate:D,onLoadedMetadata:I,autoPlay:i.autoPlay,onCanPlay:P,onWaiting:i.onWaiting,onLoadedData:i.onLoadedData,videoCallbacks:i.callbacks,children:i.children})}):d.jsx(r("WAWebBaseVideo.react"),{ref:b,src:i.url,poster:i.poster,className:i.className,onVolumeChange:L,onEnded:$,onError:x,onPause:i.onPause,onPlaying:E,onProgress:T,onTimeUpdate:D,onLoadedMetadata:I,autoPlay:i.autoPlay,onCanPlay:P,onWaiting:N,onLoadedData:i.onLoadedData,videoCallbacks:i.callbacks,children:i.children})}g.displayName=g.name+" [from "+i.id+"]",l.default=g}),98);